{% extends "base.html" %} {% from "bootstrap5/form.html" import render_form %}

{% block content %}

    <!-- Main  -->
    <div class="container mt-5">
        <div class="section-background">
            <div class="row">
                <div class="col-md-6">
                    <h1>What's happening now?</h1>
                </div>

                <div class="col-md-6 text-end">
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for('main.create_event') }}">
                            <button class="btn btn-create me-3">Create Event +</button>
                        </a>
                    {% endif %}
                    <div class="dropdown d-inline">
                        <button class="btn dropdown-toggle" type="button" id="eventCategoryDropdown"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Filter
                        </button>
                        <ul class="dropdown-menu p-3" aria-labelledby="eventCategoryDropdown">
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="house" id="houseEvents">
                                    <label class="form-check-label" for="houseEvents">House</label>
                                </div>
                            </li>
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="techno" id="technoEvents">
                                    <label class="form-check-label" for="technoEvents">Techno</label>
                                </div>
                            </li>
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="trance" id="tranceEvents">
                                    <label class="form-check-label" for="tranceEvents">Trance</label>
                                </div>
                            </li>
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="dubstep" id="dubstepEvents">
                                    <label class="form-check-label" for="dubstepEvents">Dubstep</label>
                                </div>
                            </li>
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="drum-and-bass"
                                        id="drumBassEvents">
                                    <label class="form-check-label" for="drumBassEvents">Drum and Bass</label>
                                </div>
                            </li>
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="electro" id="electroEvents">
                                    <label class="form-check-label" for="electroEvents">Electro</label>
                                </div>
                            </li>
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="future-bass"
                                        id="futureBassEvents">
                                    <label class="form-check-label" for="futureBassEvents">Future Bass</label>
                                </div>
                            </li>
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="trap" id="trapEvents">
                                    <label class="form-check-label" for="trapEvents">Trap</label>
                                </div>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>

            <!-- Event Listings -->
            <div class="row mt-5">
                {% for event in events %}
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                    <div class="event-card">
                        <a href="{{ url_for('event_bp.event_details', event_id=event.id) }}">
                            <img src="{{ url_for('static', filename='img/' + event.image.replace('website/static/img', '')) }}" class="img-fluid" alt="{{ event.name }}">
                        </a>
                        <h3>{{ event.name }}</h3>
                        <p class="location">{{ event.location }}</p>
                        <p>{{ event.date.strftime('%B %d, %Y') }}</p>
                        {% if event.available_tickets == 0 %}
                        <span class="event-status status-sold-out">Sold Out</span>
                        {% elif event.is_active %}
                        <span class="event-status status-open">Open</span>
                        {% else %}
                        <span class="event-status status-inactive">Inactive</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
    